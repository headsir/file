# 一、日常笔记

## 1. id重新开始自增           

方法1：
truncate table 你的表名
//这样不但将数据全部删除，而且重新定位自增的字段

方法2：
delete from 你的表名
dbcc checkident(你的表名,reseed,0) 
//重新定位自增的字段，让它从1开始

## 2. UNION报错

utf8mb4_general_ci 使用 UNION 报错

utf8mb4_croatian_ci 无问题

## 3. navicat mysql 默认添加更新行时当前日期

CURRENT_TIMESTAMP

![image-20220318173421056](imge/日常记录.assets/image-20220318173421056.png)

## 4.关联表删除特定行

```DELETE nr
DELETE nr
FROM  `nr宏站单验跟踪表` as nr
INNER JOIN (SELECT bu.cellname FROM `0不符合单验明细` as bu WHERE bu.`基站名称` is null)  as q on q.cellname=nr.cellname
WHERE  nr.cellname = q.cellname
```

## 5.跳过MySQL密码认证

```
跳过密码认证
1、停止MySQL服务  net stop MySQL
2、启动MySQL服务 mysqlld --skip-grant-tables(跳过密码认证表）
恢复密码认证
1、查找mysql进程  tasklist |findstr mysql
2、杀死MySQL进程  taskkill /F /PID 8920(进程ID)
3、正常启动MySQL服务 net start MySQL
```

## 6.提取字符

```
**SUBSTRING_INDEX(s, delimiter, number)**

**s 为需要分列的字段**

**delimiter 为分隔符**

**number则表示在取第几个分隔符旁边的字段**
```

## 7.MySQL 对查询的结果集添加自增序号

```
第一种：
select  (@i:=@i+1)  as i, emp.*  from emp,  (select @i:=0) as it 

第二种：
set @n = 0;
select  (@n := @n + 1) as usid ,id,company_id,department_code from sys_user ;
```

## 8.根据指定字符分割成多条数据

```
select distinct  substring_index( substring_index( a.需要拆分的字段名, ',', b.help_topic_id + 1 ), ',',- 1 ) as name
from 表名 a
join mysql.help_topic b ON b.help_topic_id < ( length( a.需要拆分的字段名 ) - length( replace( a.需要拆分的字段名, ',', '' ) ) + 1 ) 
where a.tt_id =1
substring_index() （mysql  拆分函数）
mysql.help_topic （mysql 默认自增序列表）
```

